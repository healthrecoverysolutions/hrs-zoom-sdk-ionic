{"version":3,"sources":["./src/app/login/login.page.html","./src/app/login/login.module.ts","./src/app/login/login.page.ts"],"names":[],"mappings":"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","file":"login-login-module-es5.js","sourcesContent":["module.exports = \"<ion-content class=\\\"login-page c_splash--page\\\"\\n             scroll=\\\"false\\\">\\n    <div class=\\\"c_splash--wrapper\\\">\\n\\n        <div class=\\\"c_splash--logo_container\\\" (click)=\\\"openAdmin()\\\">\\n            <div class=\\\"c_splash--logo_bg\\\"></div>\\n            <div class=\\\"c_splash--logo\\\"></div>\\n        </div>\\n        <div class=\\\"c_splash--card_container is-login\\\">\\n            <div class=\\\"c_splash--card_bg\\\"></div>\\n            <main class=\\\"c_splash--card\\\">\\n                <header class=\\\"c_splash--card_header c_card--header\\\">\\n                    <div class=\\\"c_splash--header_bg\\\"></div>\\n                    <ion-button class=\\\"c_splash--back_btn\\\"\\n                                [routerLink]=\\\"['/welcome']\\\"\\n                                routerDirection=\\\"back\\\"></ion-button>\\n                    <span class=\\\"c_splash--title_text\\\">\\n                        {{ 'SIGNIN' | translate }}\\n                    </span>\\n                </header>\\n                <div class=\\\"c_splash--card_content c_card--content\\\">\\n                    <form id=\\\"loginForm\\\"\\n                          class=\\\"c_splash--form\\\"\\n                          [formGroup]=\\\"account\\\">\\n                        <ion-list class=\\\"c_splash--input_wrapper\\\">\\n                            <ion-item class=\\\"c_splash--input\\\">\\n                                <ion-label class=\\\"c_splash--input_label\\\"\\n                                           position=\\\"floating\\\">\\n                                    {{ 'USERNAME' | translate }}\\n                                </ion-label>\\n                                <ion-input class=\\\"c_splash--input_field\\\"\\n                                           autocapitalize=\\\"none\\\"\\n                                           type=\\\"username\\\"\\n                                           formControlName=\\\"user\\\"></ion-input>\\n                            </ion-item>\\n\\n                            <ion-item class=\\\"c_splash--input\\\">\\n                                <ion-label class=\\\"c_splash--input_label\\\"\\n                                           position=\\\"floating\\\">\\n                                    {{ 'PASSWORD' | translate }}\\n                                </ion-label>\\n                                <ion-input class=\\\"c_splash--input_field\\\"\\n                                           type=\\\"password\\\"\\n                                           autocapitalize=\\\"none\\\"\\n                                           formControlName=\\\"pass\\\"></ion-input>\\n                            </ion-item>\\n                        </ion-list>\\n                    </form>\\n                </div>\\n                <footer class=\\\"c_splash--card_footer c_card--buttons\\\">\\n                    <div class=\\\"c_splash--footer_bg\\\"></div>\\n                    <ion-button class=\\\"c_button login\\\"\\n                                (click)=\\\"account.valid && doLogin()\\\"\\n                                type=\\\"submit\\\"\\n                                [disabled]=\\\"!account.valid || loggingIn\\\">\\n                        {{ 'LOGIN_BUTTON' | translate }}\\n                    </ion-button>\\n                </footer>\\n            </main>\\n        </div>\\n    </div>\\n</ion-content>\\n\"","import {NgModule, NO_ERRORS_SCHEMA} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {IonicModule} from '@ionic/angular';\nimport {RouterModule} from '@angular/router';\nimport {TranslateModule} from '@ngx-translate/core';\nimport {CookieService} from 'ngx-cookie-service';\nimport {NGXLogger} from 'ngx-logger';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport {LoginPage} from './login.page';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        IonicModule,\n        RouterModule.forChild([\n            {\n                path: '',\n                component: LoginPage\n            }\n        ]),\n        TranslateModule.forChild(),\n        FormsModule,\n        ReactiveFormsModule\n    ],\n    declarations: [LoginPage],\n    schemas: [NO_ERRORS_SCHEMA],\n    providers: [\n        CookieService,\n        NGXLogger,\n        FormsModule\n    ]\n})\nexport class LoginPageModule {}\n","import {Component} from '@angular/core';\nimport {TranslateService} from '@ngx-translate/core';\nimport {NavController, ToastController, MenuController, NavParams} from '@ionic/angular';\nimport {Validators, FormControl, FormGroup, FormBuilder} from '@angular/forms';\nimport {NGXLogger} from 'ngx-logger';\nimport {User} from '../services/user/user';\nimport {Router} from '@angular/router';\nimport {AdminService} from '@clinician/providers';\n\n@Component({\n    selector: 'page-login',\n    templateUrl: 'login.page.html',\n    providers: [NGXLogger]\n})\nexport class LoginPage {\n    data: any;\n    loggingIn: boolean;\n    // Our translated text strings\n    private loginErrorString: string;\n    private loginSuccessString: string;\n    private account: FormGroup;\n\n    constructor(\n        private navCtrl: NavController,\n        private toastCtrl: ToastController,\n        private translateService: TranslateService,\n        private menuCtrl: MenuController,\n        private user: User,\n        private logger: NGXLogger,\n        private formBuilder: FormBuilder,\n        private router: Router,\n        private adminService: AdminService\n    ) {\n        this.translateService.get('LOGIN_ERROR').subscribe((value) => {\n            this.loginErrorString = value;\n        });\n\n        this.translateService.get('LOGIN_SUCCESS').subscribe((value) => {\n            this.loginSuccessString = value;\n        });\n    }\n\n    ngOnInit(): void {\n        this.menuCtrl.enable(false);\n        // The account fields for the login form.\n        this.account = this.formBuilder.group({\n            user: new FormControl('', Validators.required),\n            pass: new FormControl('', Validators.required),\n            type: new FormControl('clinician', null)\n        });\n    }\n\n    ionViewDidLeave() {\n        this.menuCtrl.enable(true);\n    }\n\n    // Attempt to login in through our User service\n\n    async doLogin(): Promise<any> {\n        this.loggingIn = true;\n        this.user.login(this.account.value).subscribe(\n            {\n                next: (resp) => {\n                    this.loggingIn = false;\n                    this.data = resp;\n                    let toastMessage = this.loginSuccessString;\n                    if (this.user.data.type !== 'clinician') {\n                        toastMessage = this.loginErrorString;\n                    } else {\n                        this.router.navigateByUrl('/patient-list');\n                    }\n                    this.loginToast(toastMessage);\n                    return this.data;\n                },\n                error: (err) => {\n                    // Unable to log in\n                    let toastFailMessage = this.loginErrorString;\n                    this.loggingIn = false;\n                    this.loginToast(toastFailMessage);\n                }\n            }\n        ).add(() => this.account.reset());\n    }\n\n    async loginToast(toastMessage: string) {\n        let loginToast = await this.toastCtrl.create({\n            message: toastMessage,\n            duration: 3000,\n            position: 'top'\n        });\n        return await loginToast.present();\n    }\n\n    public openAdmin(): void {\n        this.adminService.openAdmin();\n    }\n}\n"],"sourceRoot":""}